/**
	* GetTweets v@VERSION
	*
	* A jQuery plugin to retrive tweets from multiple users
	*
	* https://github.com/adamatmonk/jquery-gettweets
	*
	* Copyright 2011 by Adam Randlett
    * Released under the MIT License
    * http://en.wikipedia.org/wiki/MIT_License
**/
(function(a){a.fn.getTweets=function(b,c){var d={twitter_api_url:"http://api.twitter.com/1/statuses/user_timeline",twitter_users:["monkdev"],format:"json",howmany:4,retweets:true,no_replies:true,rate_limit_status:false,tweetstring:"<div class='tweet'><div class='header'><p class='summary'>{tweettext}</p><p class='meta'>{tweetdate} by <a href='http://twitter.com/{tweetuser:screenname}'>{tweetuser:name}</a></p></div> <div class='image'><a href='http://twitter.com/{tweetuser:screenname}'><img src='{tweetuser:image}' width='48' height='48'></a></div></div>",retweetstring:"<div class='tweet'><div class='header'><p class='summary'>{tweettext}</p><p class='meta'>{tweetdate} <a href='http://twitter.com/{retweetuser:screenname}'>{retweetuser:name}</a> <span class='rt'>retweeted</span> by <a href='http://twitter.com/{tweetuser:screenname}'>{tweetuser:name}</a> </p></div> <div class='image'><a href='http://twitter.com/{tweetuser:screenname}'><img src='{retweetuser:image}' width='48' height='48'></a></div></div>"};var e=a.extend(d,b);return this.each(function(){function m(b){a.ajax({dataType:"jsonp",url:e.twitter_api_url+"."+e.format+"?&screen_name="+d.twitter_users[b]+"&include_rts="+d.retweets+"&exclude_replies="+d.no_replies+"&count="+d.howmany+"&callback=?",timeout:1e3,type:"GET",async:false,crossDomain:true,error:function(){},success:function(a){j(a)},complete:function(){if(b<h){m(++b)}else{k()}}})}function l(b){a.getJSON("http://api.twitter.com/1/account/rate_limit_status.json?&callback=?",function(a){console.log("-------------------------------------------------------");console.log("RATE LIMIT STATUS");console.log("  Hourly Limit: "+a.hourly_limit);console.log("  Remaining Hits: "+a.remaining_hits);console.log("  Reset Time: "+a.reset_time);console.log("-------------------------------------------------------")})}function k(){f.sort(function(a,b){return b.id-a.id});twitter_count=f.length;for(var a=0;a<d.howmany;a++){b.append(f[a].status)}if(typeof c=="function"){c.call(this)}}function j(b){a.each(b,function(a,b){if(b.text!==undefined){var c=b.text;var e={"{tweetdate}":i(b.created_at),"{tweeturl}":"http://www.twitter.com/"+b.user.screen_name+"/status/"+b.id_str,"{tweettext}":c.parseUrl().parseUsername().parseHashtag(),"{tweetuser:name}":b.user.name,"{tweetuser:screenname}":b.user.screen_name,"{tweetuser:location}":b.user.location,"{tweetuser:description}":b.user.description,"{tweetuser:url}":b.user.url,"{tweetuser:image}":b.user.profile_image_url,"{tweetsource}":b.source};var g,h;if(b.retweeted_status){e["{retweetuser:name}"]=b.retweeted_status.user.name;e["{retweetuser:screenname}"]=b.retweeted_status.user.screen_name;e["{retweetuser:image}"]=b.retweeted_status.user.profile_image_url;h=d.retweetstring}else{h=d.tweetstring}var g=h.multiReplace(e);f.push({id:b.id,status:g})}})}function i(a){var b=a.split(" ");a=b[1]+" "+b[2]+", "+b[5]+" "+b[3];var c=Date.parse(a);var d=arguments.length>1?arguments[1]:new Date;var e=parseInt((d.getTime()-c)/1e3);e=e+d.getTimezoneOffset()*60;if(e<60){return"less than a minute ago"}else if(e<120){return"about a minute ago"}else if(e<60*60){return parseInt(e/60).toString()+" minutes ago"}else if(e<120*60){return"about an hour ago"}else if(e<24*60*60){return"about "+parseInt(e/3600).toString()+" hours ago"}else if(e<48*60*60){return"1 day ago"}else{return parseInt(e/86400).toString()+" days ago"}}var b=a(this),d={twitter_users:e.twitter_users,howmany:e.howmany,tweetstring:e.tweetstring,retweetstring:e.retweetstring,retweets:e.retweets,no_replies:e.no_replies,rate_limit_status:e.rate_limit_status},f=[],g,h=d.twitter_users.length-1;String.prototype.parseUrl=function(){var a=new RegExp(/[-a-zA-Z0-9@:%_\+.~#?&//=]{2,256}\.[a-z]{2,4}\b(\/[-a-zA-Z0-9@:%_\+.~#?&//=]*)?/gi);return this.replace(a,function(a){return'<a href="'+a+'">'+a+"</a>"})};String.prototype.parseUsername=function(){return this.replace(new RegExp(/[@]+[A-Za-z0-9-_]+/g),function(a){var b=a.replace("@","");return a.link("http://twitter.com/"+b)})};String.prototype.parseHashtag=function(){return this.replace(new RegExp(/[#]+[A-Za-z0-9-_]+/g),function(a){var b=a.replace("#","%23");return a.link("http://search.twitter.com/search?q="+b)})};String.prototype.multiReplace=function(a){var b=this,c;for(c in a){b=b.replace(new RegExp(c,"g"),a[c])}return b};if(d.rate_limit_status){l()}m(0)})}})(jQuery)